{"filter":false,"title":"user.js","tooltip":"/models/user.js","undoManager":{"mark":14,"position":14,"stack":[[{"start":{"row":60,"column":0},"end":{"row":61,"column":0},"action":"insert","lines":["",""],"id":2}],[{"start":{"row":61,"column":0},"end":{"row":62,"column":0},"action":"insert","lines":["",""],"id":3}],[{"start":{"row":62,"column":0},"end":{"row":63,"column":0},"action":"insert","lines":["",""],"id":4}],[{"start":{"row":63,"column":0},"end":{"row":64,"column":0},"action":"insert","lines":["",""],"id":5}],[{"start":{"row":64,"column":0},"end":{"row":116,"column":2},"action":"insert","lines":["var bcrypt = require('bcryptjs');","","module.exports = {","    identity: 'user',","    connection: 'default',","    attributes: {","        neptun: {","            type: 'string',","            required: true,","            unique: true,","        },","        password: {","            type: 'string',","            required: true,","        },","        surname: {","            type: 'string',","            required: true,","        },","        forename: {","            type: 'string',","            required: true,","        },","        avatar: {","            type: 'string',","            url: true,","        },","        role: {","            type: 'string',","            enum: ['riporter', 'operator'],","            required: true,","            defaultsTo: 'riporter'","        },","        ","        errors: {","            collection: 'error',","            via: 'user'","        },","        ","        validPassword: function (password) {","            return bcrypt.compareSync(password, this.password);","        },","    },","    beforeCreate: function(values, next) {","        bcrypt.hash(values.password, 10, function(err, hash) {","            if (err) {","                return next(err);","            }","            values.password = hash;","            next();","        });","    },","};"],"id":6}],[{"start":{"row":0,"column":0},"end":{"row":1,"column":0},"action":"insert","lines":["",""],"id":7}],[{"start":{"row":63,"column":0},"end":{"row":75,"column":10},"action":"remove","lines":["","","var bcrypt = require('bcryptjs');","","module.exports = {","    identity: 'user',","    connection: 'default',","    attributes: {","        neptun: {","            type: 'string',","            required: true,","            unique: true,","        },"],"id":8}],[{"start":{"row":63,"column":0},"end":{"row":64,"column":0},"action":"remove","lines":["",""],"id":9}],[{"start":{"row":61,"column":0},"end":{"row":74,"column":10},"action":"remove","lines":["","","        password: {","            type: 'string',","            required: true,","        },","        surname: {","            type: 'string',","            required: true,","        },","        forename: {","            type: 'string',","            required: true,","        },"],"id":10}],[{"start":{"row":61,"column":0},"end":{"row":65,"column":10},"action":"remove","lines":["","        avatar: {","            type: 'string',","            url: true,","        },"],"id":11}],[{"start":{"row":61,"column":0},"end":{"row":62,"column":0},"action":"remove","lines":["",""],"id":12}],[{"start":{"row":61,"column":0},"end":{"row":66,"column":10},"action":"remove","lines":["        role: {","            type: 'string',","            enum: ['riporter', 'operator'],","            required: true,","            defaultsTo: 'riporter'","        },"],"id":13}],[{"start":{"row":61,"column":0},"end":{"row":66,"column":10},"action":"remove","lines":["","        ","        errors: {","            collection: 'error',","            via: 'user'","        },"],"id":14}],[{"start":{"row":61,"column":0},"end":{"row":65,"column":10},"action":"remove","lines":["","        ","        validPassword: function (password) {","            return bcrypt.compareSync(password, this.password);","        },"],"id":15}],[{"start":{"row":61,"column":0},"end":{"row":72,"column":2},"action":"remove","lines":["","    },","    beforeCreate: function(values, next) {","        bcrypt.hash(values.password, 10, function(err, hash) {","            if (err) {","                return next(err);","            }","            values.password = hash;","            next();","        });","    },","};"],"id":16}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":0,"column":0},"end":{"row":0,"column":0},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1445464098653,"hash":"d28f53b3743ad4ebca7aac520eeb01ce3fd80a97"}